$('#<%= "#{@plot_id}_button" %>').prop('type', 'button');

var lines = [];

<% @data.each do |attribute, values| %>
  lines.push({
      x: <%= raw(@ids) %>,
      y: <%= values %>,
      name: "<%= attribute.to_s.humanize %>",
      mode: 'lines+markers',
      type: 'scatter',
      connectgaps: true
  });
<% end %>

var layout = {
    xaxis: {
        tickangle: 90,
        showticklabels: <%= @ids.count < 20 %>
    },
    yaxis: {
        title: 'msec'
    }
};

Plotly.newPlot('<%= "#{@plot_id}_div" %>', lines, layout);
